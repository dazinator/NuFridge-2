<template>
<require from="./date-format"></require>

<h1 textcontent="${feedName}"></h1>

<div class="ui pointing secondary menu feedMenu">
    <a class="item active" data-tab="first">Overview</a>
    <a class="item" data-tab="second">Endpoints</a>
    <a class="item" data-tab="third">Packages</a>
    <a class="item" data-tab="fourth">History</a>
    <a class="item settingTab" data-tab="fifth">Settings</a>
</div>

<div data-tab="first" class="ui bottom tab segment active">
    <h2 class="ui header">
        Statistics
    </h2>

    <div class="ui tiny horizontal statistics">
        <div class="statistic">
            <div class="value">
                0
            </div>
            <div class="label">
                Total Packages
            </div>
        </div>
    </div>

    <h2 class="ui header">
        Background Jobs
    </h2>

    <p>No background jobs are executing for this feed.</p>

    <h2 class="ui header">
        Administrative Actions
    </h2>

    <button class="ui button" style="margin-bottom: 0.75em">
        Reindex Packages
    </button>
    <button class="ui button" style="margin-bottom: 0.75em">
        Execute Package Retention Policy
    </button>
    <button class="ui button" style="margin-bottom: 0.75em">
        Change Package Directory
    </button>

</div>


<div data-tab="second" class="ui bottom tab segment">
    <table class="ui compact table">
        <thead>
        <tr>
            <th>URL</th>
            <th>Usage</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td><a target="_blank" href="${feed.RootUrl}/api/v2">${feed.RootUrl}/api/v2</a></td>
            <td>Use this for pushing NuGet packages or querying this NuGet feed.</td>
        </tr>
        <tr>
            <td><a target="_blank" href="${feed.RootUrl}/api/symbols">${feed.RootUrl}/api/symbols</a></td>
            <td>Use this to access the symbol server for this NuGet feed.</td>
        </tr>
        </tbody>
    </table>
</div>

<div data-tab="third" class="ui bottom tab segment">
    <div class="stackable four column ui grid">
        <div class="column">
            <button class="ui basic button labeled icon" style="width: 100%">
                <i class="undo icon"></i>
                Reset
            </button>
        </div>
        <div class="column">
            <select class="ui dropdown" style="width: 100%">
                <option value="10">10 per page</option>
                <option value="20">20 per page</option>
                <option value="30">30 per page</option>
                <option value="40">40 per page</option>
            </select>
        </div>
        <div class="column">
            <select class="ui dropdown" style="width: 100%">
                <option value="0">Downloads descending</option>
                <option value="1">Downloads ascending</option>
                <option value="2">Package Id descending</option>
                <option value="3">Package Id ascending</option>
            </select>
        </div>
        <div class="column">
            <div class="ui search" style="width: 100%">
                <input class="prompt" type="text" placeholder="Search..." style="width: 100%">

                <div class="results"></div>
            </div>
        </div>
    </div>

    <div class="one column ui grid">
        <div class="column">

            <div class="ui floated menu">
                <div class="item">
                    Page 1 of 4
                </div>
            </div>

            <div class="ui floated pagination menu">
                <a class="icon item">
                    <i class="left chevron icon"></i>
                </a>
                <a class="item">1</a>
                <a class="item">2</a>
                <a class="item">3</a>
                <a class="item">4</a>
                <a class="icon item">
                    <i class="right chevron icon"></i>
                </a>
            </div>
        </div>
    </div>
    <table class="ui basic table">
        <tbody>
        <tr>
            <td><strong>EntityFramework</strong></td>
            <td>
                <div class="ui blue labels">
                    <a class="ui label">
                        microsoft
                    </a>
                    <a class="ui label">
                        aspnet
                    </a>
                    <a class="ui label">
                        EntityFramework
                    </a>
                </div>
            </td>
            <td>Entity Framework is Microsoft's recommended data access technology for new applications.</td>
        </tr>
        <tr>
            <td><strong>Json.NET</strong></td>
            <td>
                <div class="ui blue labels">
                    <a class="ui label">
                        jamesnk
                    </a>
                </div>
            </td>
            <td>Json.NET is a popular high-performance JSON framework for .NET</td>
        </tr>
        <tr>
            <td><strong>Bootstrap CSS</strong></td>
            <td>
                <div class="ui blue labels">
                    <a class="ui label">
                        Supergibbs
                    </a>
                    <a class="ui label">
                        twbs
                    </a>
                </div>
            </td>
            <td>The most popular front-end framework for developing responsive, mobile first projects on the web.</td>
        </tr>
        <tr>
            <td><strong>Microsoft HTTP Client Libraries</strong></td>
            <td>
                <div class="ui blue labels">
                    <a class="ui label">
                        microsft
                    </a>
                    <a class="ui label">
                        dotnetframework
                    </a>
                </div>
            </td>
            <td>This package contains everything you need to host ASP.NET Web API on IIS. ASP.NET Web API is a framework
                that makes it easy to build HTTP services that reach a broad range of clients, including browsers and mobile
                devices. ASP.NET Web API is an ideal platform for building RESTful applications on the .NET Framework.
            </td>
        </tr>
        </tbody>
    </table>
</div>

<div data-tab="fourth" class="ui bottom tab segment" css="${isLoadingHistory ? 'min-height:150px;' : ''}">
    <div class="ui inverted dimmer ${isLoadingHistory ? 'active' : ''}">
        <div class="ui indeterminate large text loader">Loading history</div>
    </div>
    <div class="ui" if.bind="isLoadingHistory === false && historyRecords.length === 0">
        <p>No events have been recorded for this feed yet.</p>
    </div>
    <section id="cd-timeline" class="cd-container" if.bind="historyRecords.length > 0">
        <div class="cd-timeline-block" repeat.for="item of historyRecords">
            <div class="cd-timeline-img ${item.Type === 0 ? 'cd-silver' : 'cd-blue'}">
                <i class="inverted big cube icon"></i>
            </div>

            <div class="cd-timeline-content">
                <h3 class="ui header" style="margin: 0;">${item.Title}
                    <div class="sub header">${item.Description}</div>
                </h3>
                <span class="cd-date">${item.Date | dateFormat}</span>
            </div>
        </div>
    </section>
</div>

<div data-tab="fifth" class="ui bottom tab segment settingTab">
   
    <h2 class="ui header">
        General Settings
        <div class="sub header">Manage your general feed settings.</div>
    </h2>
    <div class="ui inverted dimmer ${isUpdatingFeed ? 'active' : ''}">
        <div class="ui indeterminate large text loader">Saving Feed</div>
    </div>
    <form class="ui form raised segment">
        <div class="field">
            <label>Feed Name</label>

            <p>The feed name is used to generate the feed URL. Changing it will break any applications that access this
                feed.</p>
            <input type="text" value.bind="feed.Name">
        </div>
    </form>

    <h2 class="ui header">
        Security Settings
        <div class="sub header">Manage your security settings for accessing this feed.</div>
    </h2>

    <form class="ui form raised segment">
        <div class="field">
            <label>API Key</label>
            <p>When using an API Key you will need to provide it when pushing packages to the feed.</p>
            <div class="ui input ${feed.HasApiKey === true ? 'action' : ''}">
                <input type="text" class="apiKeyTextBox" value.bind="feed.ApiKey" placeholder.bind="feed.HasApiKey === true ? 'An API Key has already been set.' : ''" disabled.bind="feed.HasApiKey === true">
                <button class="ui gray right labeled button" if.bind="feed.HasApiKey === true" click.trigger="clearApiKey()">
                    Clear
                </button>
            </div>
        </div>
    </form>

    <h2 class="ui header">
        Package Retention Policy Settings
        <div class="sub header">Manage your package retention settings for this feed.</div>
    </h2>
    <form class="ui form raised segment">
        <div class="field">
            <div class="inline field">
                <div class="ui toggle checkbox retentionPolicyEnabled">
                    <input type="checkbox">
                    <label style="font-size: .9285em; font-weight: 700;">Enable Package Retention Policy</label>
                </div>
            </div>
        </div>
        <div class="field">
            <label>Maximum Amount of Release Packages to Keep</label>

            <p>This defines the amount of versions to keep of each package before deleting the older versions.</p>
            <input type="text">
        </div>
        <div class="field">
            <label>Maximum Amount of Pre-release Packages to Keep</label>

            <p>This defines the amount of versions to keep of each package before deleting the older versions.</p>

            <p>A package is determined to be a pre-release package by appending a hyphen and a series of dot separated
                identifiers immediately following the patch version.</p>
            <input type="text">
        </div>
    </form>

    <div class="ui buttons">
        <button class="ui positive button" click.trigger="updateFeed()">Save</button>
    </div>

    <div class="ui buttons floatRight">
        <button class="ui red button" click.trigger="deleteFeedClick()">Delete</button>
    </div>
</div>


    <div class="ui small modal transition hidden" id="deleteConfirmModal">
        <div class="ui icon header">
            <i class="cube icon"></i>
            <span>Delete the '${feedName}' feed?</span>
        </div>
        <div class="content">
            <p style="text-align: center;">Are you sure you want to delete this feed? All packages will be deleted permanently.</p>
        </div>
        <div class="actions">
            <div class="ui black deny button">
                No
            </div>
            <div class="ui positive right labeled icon button">
                Yes
                <i class="checkmark icon"></i>
            </div>
        </div>
    </div>

</template>
